name: handbrake-jz
version: 1.0.1-0
summary: HandBrake is a tool for convertion video to.
description: |
  HandBrake is a tool for converting video from nearly any format to a
  selection of modern, widely supported codecs.

grade: stable
confinement: strict

plugs:
  gnome318-runtime:
    content: gnome318-runtime
    interface: content
    target: gnome-runtime
    default-provider: gnome318-udt:gnome318-runtime

apps:
  ghb:
    command: desktop-launch ghb
    plugs: [unity7, home, gsettings, mount-observe, network, process-control, gnome318-runtime]

parts:
  ghb:
    plugin: inbuild
    configflags:
      - --prefix=/
      - --disable-gtk-update-checks
    source: https://handbrake.fr/rotation.php?file=HandBrake-1.0.1.tar.bz2
    after: [desktop-gtk3]
    build-packages:
      - libtool-bin
      - intltool
      - yasm
      - cmake
      - libgudev-1.0-dev
      - libbz2-dev
      - zlib1g-dev
      - libgtk-3-dev
      - libwebkitgtk-3.0-dev
      - libnotify-dev
      - libgstreamer1.0-dev
      - libgstreamer-plugins-base1.0-dev
      - libappindicator3-dev
      - libfribidi-dev
      - libxml2-dev
      - libogg-dev
      - libtheora-dev
      - libvorbis-dev
      - libopus-dev
      - libsamplerate0-dev
      - libfreetype6-dev
      - libfontconfig1-dev
      - libass-dev
      - libmp3lame-dev
      - libx264-dev
      - libjansson-dev
    snap:
      - -share/applications

  desktop-gtk3:
    snap:
      - -usr/include
      - -usr/share/apport
      - -usr/share/doc
      - -usr/share/doc-base
      - -usr/share/libthai
      - -usr/share/lintian
      - -usr/share/man
      - -usr/share/pkgconfig
      - -var

